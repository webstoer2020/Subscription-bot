# تعليمات رفع البوت إلى استضافة خارجية (مثل Render أو Koyeb)

هذا المجلد يحتوي على كافة الملفات اللازمة لتشغيل بوت التليجرام الخاص بك على أي استضافة خارجية تدعم لغة بايثون.

### الملفات الموجودة:
1. `main.py`: الملف الأساسي لتشغيل البوت.
2. `config.py`: إعدادات البوت والتوكن.
3. `database.py`: التعامل مع قاعدة البيانات (تم تحديثه ليدعم الاتصالات الآمنة وغير الآمنة).
4. `handlers.py`: معالجة أوامر الرسائل.
5. `scheduler.py`: نظام المواعيد والاشتراكات.
6. `utils.py`: أدوات مساعدة.
7. `requirements.txt`: المكتبات البرمجية المطلوبة.

---

### خطوات الرفع (شرح مفصل):

#### الخطوة 1: تجهيز قاعدة البيانات
- الاستضافات المجانية (مثل Render) تمسح الملفات عند إعادة التشغيل، لذا لا ينصح باستخدام ملف `subscriptions.db`.
- يُفضل إنشاء قاعدة بيانات Postgres مجانية على موقع (Neon.tech) أو (Supabase).
- بعد الحصول على رابط قاعدة البيانات (Database URL)، ستحتاجه في الخطوة رقم 4.

#### الخطوة 2: رفع الكود إلى GitHub
- قم بإنشاء مستودع (Repository) جديد على GitHub.
- ارفع محتويات مجلد `deploy_package` إلى المستودع.

#### الخطوة 3: الربط مع منصة الاستضافة (مثال منصة Render)
- قم بالتسجيل في Render.com واربط حسابك بـ GitHub.
- اختر "New" ثم "Web Service" أو "Background Worker".
- اختر المستودع الذي رفعت فيه الكود.

#### الخطوة 4: إعداد المتغيرات البيئية (Environment Variables)
في لوحة تحكم الاستضافة، ابحث عن قسم "Environment Variables" وأضف القيم التالية:
- `TELEGRAM_TOKEN`: توكن البوت الخاص بك من BotFather.
- `DATABASE_URL`: رابط قاعدة البيانات الذي حصلت عليه من (Neon أو Supabase).

#### الخطوة 5: التشغيل
- في إعدادات التشغيل (Start Command)، تأكد أنها: `python main.py`
- في إعدادات التثبيت (Install Command)، تأكد أنها: `pip install -r requirements.txt`

---

### ملاحظة هامة:
- تم إصلاح مشكلة SSL؛ البوت الآن سيحاول الاتصال بـ SSL أولاً، وإذا لم يكن مدعوماً (مثل بعض قواعد البيانات المحلية) سيتصل بدونه تلقائياً.
- تأكد من عدم رفع ملف `.env` أو أي توكنات سرية إلى GitHub بشكل علني.
